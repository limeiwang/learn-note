(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{420:function(e,t,a){"use strict";a.r(t);var o=a(52),n=Object(o.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"移动端适配"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#移动端适配"}},[e._v("#")]),e._v(" 移动端适配")]),e._v(" "),a("p",[e._v("首先是名词介绍：")]),e._v(" "),a("ul",[a("li",[e._v("像素：Pixel，就是")]),e._v(" "),a("li",[e._v("物理像素：也就是设备像素")]),e._v(" "),a("li",[e._v("逻辑像素：（css像素）单位为 "),a("code",[e._v("px")])]),e._v(" "),a("li",[e._v("设备像素比："),a("code",[e._v("devicePixelRatio")]),e._v("，（在高倍屏会出现1px变大的问题）。")]),e._v(" "),a("li",[e._v("css单位"),a("code",[e._v("em")]),e._v("：相对于当前对象内文本的字体尺寸")]),e._v(" "),a("li",[e._v("css单位"),a("code",[e._v("rem")]),e._v("： 即root em，root指的是根（html标签）")])]),e._v(" "),a("h3",{attrs:{id:"_1px问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1px问题"}},[e._v("#")]),e._v(" 1px问题")]),e._v(" "),a("p",[e._v("京东商城解决方案：伪元素 + "),a("code",[e._v("scale")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('  .div::after {\n    content: "";\n    width: 200%;\n    height: 200%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    border: 1px solid #bfbfbf;\n    border-radius: 4px;\n    -webkit-transform: scale(.5);\n    transform: scale(.5);\n    -webkit-transform-origin: top left;\n    transform-origin: top left;\n  }\n')])])]),a("p",[e._v("那么淘宝商城呢？"),a("code",[e._v("border-left: 1px solid #dfdfdf;")]),e._v("，因为阿里大大已经表示不支持石器时代的浏览器了。")]),e._v(" "),a("p",[e._v("其他较好解决方案：渐变的还不错。")]),e._v(" "),a("h2",{attrs:{id:"一、像素适配"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、像素适配"}},[e._v("#")]),e._v(" 一、像素适配")]),e._v(" "),a("h5",{attrs:{id:"阿里flexible布局-版本1-x"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#阿里flexible布局-版本1-x"}},[e._v("#")]),e._v(" 阿里flexible布局 - 版本1.x")]),e._v(" "),a("blockquote",[a("p",[e._v("该布局于 2017年8月9日被2.0版本取代")])]),e._v(" "),a("p",[e._v("实现原理 "),a("code",[e._v("假设（UI稿750px宽）")])]),e._v(" "),a("ul",[a("li",[e._v("设置viewport的 "),a("code",[e._v("scale = 1/window.devicePixelRatio")])]),e._v(" "),a("li",[e._v("将屏幕分成10份，"),a("code",[e._v("font-size = 实际屏幕宽度 / 10;")])]),e._v(" "),a("li",[e._v("开发时直接填写"),a("code",[e._v("(设计稿DOM宽度)px")])]),e._v(" "),a("li",[e._v("利用 "),a("code",[e._v("px2rem插件")]),e._v(" 转换为 ->  实际rem")])]),e._v(" "),a("h5",{attrs:{id:"阿里flexible布局-版本2-x"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#阿里flexible布局-版本2-x"}},[e._v("#")]),e._v(" 阿里flexible布局 - 版本2.x")]),e._v(" "),a("blockquote",[a("p",[e._v("flexible 2.x： https://github.com/amfe/lib-flexible")])]),e._v(" "),a("p",[e._v("实现原理")]),e._v(" "),a("ul",[a("li",[e._v("利用viewport的理想视口，删除1.x版本的scale缩放")]),e._v(" "),a("li",[e._v("其他依旧和1.x版本一样")])]),e._v(" "),a("h5",{attrs:{id:"网易布局"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#网易布局"}},[e._v("#")]),e._v(" 网易布局")]),e._v(" "),a("blockquote",[a("p",[e._v("个人很喜欢的布局方案")])]),e._v(" "),a("p",[e._v("实现原理 "),a("code",[e._v("假设（UI稿750px宽）")])]),e._v(" "),a("ul",[a("li",[e._v("如低版本浏览器:\n"),a("ul",[a("li",[e._v("UI稿以"),a("code",[e._v("font-size = 100px;")]),e._v("作为参照，"),a("code",[e._v("总宽度 = 7.5rem")])]),e._v(" "),a("li",[a("code",[e._v("(设计稿DOM对应px / 750px) * 7.5rem = 实际rem")])]),e._v(" "),a("li",[e._v("其他屏幕按"),a("code",[e._v("屏幕宽度百分比 缩放 font-size的值")])])])]),e._v(" "),a("li",[e._v("若高版本浏览器:\n"),a("ul",[a("li",[a("code",[e._v("1px/750px ≈ 0.1333333%")])]),e._v(" "),a("li",[e._v("按照低版本逻辑："),a("code",[e._v("font-size = 0.1333333% * 100 = 13.33333vw")])])])])]),e._v(" "),a("h5",{attrs:{id:"webpack插件postcss-px-to-viewport"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack插件postcss-px-to-viewport"}},[e._v("#")]),e._v(" webpack插件postcss-px-to-viewport")]),e._v(" "),a("blockquote",[a("p",[e._v("顾名思义，将px转换为vw、vh、vmin、vmax")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("{\n    viewportWidth: 750,\n    viewportHeight: 1334,\n    unitPrecision: 3,\n    viewportUnit: 'vw',\n    selectorBlackList: ['.ignore', '.hairlines'],\n    minPixelValue： 1,\n    mediaQuery: false\n}\n")])])]),a("h5",{attrs:{id:"附-自用方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#附-自用方案"}},[e._v("#")]),e._v(" 附：自用方案")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('    var initDocumentFontSize = function initDocumentFontSize() {\n        var resetFontSize = function resetFontSize() {\n            var bodyWidth = document.body.clientWidth;\n            // UI 稿宽度 目前是 375px\n            var UI_Layout_Width = 375;\n            // 以100作为基数，方便计算\n            var Base_Font_Size = 100;\n            // 设置最宽屏幕宽度\n            var Max_Layout_Width = 768;\n            // 注意在最上级的section || div标签上要设置maxwidth: 768px; margin: 0 auto;\n            // 得到fontSize\n            var fontSize =\n                bodyWidth <= Max_Layout_Width\n                    ? (Base_Font_Size * bodyWidth) / UI_Layout_Width\n                    : (Base_Font_Size * Max_Layout_Width) / UI_Layout_Width;\n            // 如果要设置最大\n            // 设置html字体大小\n            document.documentElement.style.fontSize = fontSize + "px";\n            // 重写body的font-size，避免未设置字体大小时，字体继承过于夸张\n            document.body.style.fontSize = "12px";\n        };\n        resetFontSize();\n        // load 窗口加载完成触发\n        window.addEventListener("load", resetFontSize, false);\n        // orientationchange 设备的纵横方向改变时触发。\n        window.addEventListener("orientationchange", resetFontSize, false);\n        // resize 窗口大小改变时触发\n        window.addEventListener("resize", resetFontSize, false);\n    };\n\n    initDocumentFontSize();\n')])])]),a("h2",{attrs:{id:"二、iphonex适配"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、iphonex适配"}},[e._v("#")]),e._v(" 二、IphoneX适配")]),e._v(" "),a("p",[e._v("IphoneX底部有小黑条，导致网页出现了比较尴尬的屏幕适配问题。")]),e._v(" "),a("p",[e._v("在IOS11中，苹果公司为了适配IphoneX对meta标签加了扩展属性"),a("code",[e._v("viewport-fit")]),e._v("，用来设置窗口布局。")]),e._v(" "),a("p",[e._v("viewport-fit 设置为cover可以网页内容完全覆盖可视窗口")]),e._v(" "),a("h3",{attrs:{id:"h5-iphonex适配"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#h5-iphonex适配"}},[e._v("#")]),e._v(" H5 IphoneX适配")]),e._v(" "),a("p",[a("code",[e._v("viewport")]),e._v("中新增"),a("code",[e._v("viweport-fit")]),e._v("属性，使得页面内容完全覆盖整个窗口：")]),e._v(" "),a("p",[a("code",[e._v('<meta name="viewport" content="width=device-width, viewport-fit=cover">')])]),e._v(" "),a("p",[e._v("只有设置了 viewport-fit=cover，才能使用 env()。")]),e._v(" "),a("p",[e._v("将页面主体内容限定在安全区域内")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("  body {\n    padding-bottom: constant(safe-area-inset-bottom);  /* 兼容 iOS < 11.2 */\n    padding-bottom: env(safe-area-inset-bottom);  /* 兼容 iOS >= 11.2 */\n  }\n")])])]),a("p",[e._v("参考："),a("a",{attrs:{href:"https://aotu.io/notes/2017/11/27/iphonex/?utm_source=tuicool&utm_medium=referral",target:"_blank",rel:"noopener noreferrer"}},[e._v("凹凸实验室"),a("OutboundLink")],1)]),e._v(" "),a("h3",{attrs:{id:"小程序-iphonex适配"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#小程序-iphonex适配"}},[e._v("#")]),e._v(" 小程序 IphoneX适配")]),e._v(" "),a("p",[e._v("至于小程序，只能通过JS来配置。")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("  wx.getSystemInfo({\n    success: function(res) {\n      console.log(res.model)\n      // 判断 model是否包含 'iPhone X'\n      // 然后动态设置 bottom:68rpx\n    }\n  })\n")])])]),a("h3",{attrs:{id:"safari-圆角无效bug"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#safari-圆角无效bug"}},[e._v("#")]),e._v(" Safari 圆角无效BUG")]),e._v(" "),a("p",[e._v("在 Safari 中当元素有背景时，会出现 "),a("code",[e._v("border-radius")]),e._v(" 不能清理背景（圆角变直角）")]),e._v(" "),a("p",[e._v("解决方法：")]),e._v(" "),a("ol",[a("li",[a("code",[e._v("overflow: hidden;")])]),e._v(" "),a("li",[e._v("如果方法1无效，可以再添加 "),a("code",[e._v("border: none;")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);