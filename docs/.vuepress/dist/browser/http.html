<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>关于Http | Limw</title>
    <meta name="generator" content="VuePress 1.8.0">
    
    <meta name="description" content="Limw,源码解析,前端,Vue,Vue3,Es6,Javascript">
    
    <link rel="preload" href="/assets/css/0.styles.4250c2dd.css" as="style"><link rel="preload" href="/assets/js/app.b7a1be70.js" as="script"><link rel="preload" href="/assets/js/2.7944c152.js" as="script"><link rel="preload" href="/assets/js/8.ed44696a.js" as="script"><link rel="prefetch" href="/assets/js/10.ff3835b3.js"><link rel="prefetch" href="/assets/js/11.cd794ffd.js"><link rel="prefetch" href="/assets/js/12.19111725.js"><link rel="prefetch" href="/assets/js/13.3b57dd1a.js"><link rel="prefetch" href="/assets/js/14.029cb378.js"><link rel="prefetch" href="/assets/js/15.de95c767.js"><link rel="prefetch" href="/assets/js/16.26b28b76.js"><link rel="prefetch" href="/assets/js/17.3cecad30.js"><link rel="prefetch" href="/assets/js/18.50811b1a.js"><link rel="prefetch" href="/assets/js/19.8908038b.js"><link rel="prefetch" href="/assets/js/20.bad8f0f5.js"><link rel="prefetch" href="/assets/js/21.836b185f.js"><link rel="prefetch" href="/assets/js/22.6ac1295f.js"><link rel="prefetch" href="/assets/js/23.486b32ed.js"><link rel="prefetch" href="/assets/js/24.fcff8847.js"><link rel="prefetch" href="/assets/js/25.900e1ee4.js"><link rel="prefetch" href="/assets/js/26.b019f22c.js"><link rel="prefetch" href="/assets/js/27.0d425675.js"><link rel="prefetch" href="/assets/js/28.6a63270c.js"><link rel="prefetch" href="/assets/js/29.54c40ba9.js"><link rel="prefetch" href="/assets/js/3.bfb793ef.js"><link rel="prefetch" href="/assets/js/30.de17770f.js"><link rel="prefetch" href="/assets/js/31.6c957413.js"><link rel="prefetch" href="/assets/js/32.2986162a.js"><link rel="prefetch" href="/assets/js/33.52baf97a.js"><link rel="prefetch" href="/assets/js/34.812199d5.js"><link rel="prefetch" href="/assets/js/35.33eb89e8.js"><link rel="prefetch" href="/assets/js/36.7a52bbdd.js"><link rel="prefetch" href="/assets/js/37.e3a61966.js"><link rel="prefetch" href="/assets/js/38.622636cf.js"><link rel="prefetch" href="/assets/js/4.65737359.js"><link rel="prefetch" href="/assets/js/5.aba36a73.js"><link rel="prefetch" href="/assets/js/6.097d0fbc.js"><link rel="prefetch" href="/assets/js/7.e64105ee.js"><link rel="prefetch" href="/assets/js/9.207a1282.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4250c2dd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Limw</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="https://lmw0221.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/lmw0221" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="https://lmw0221.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/lmw0221" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>深入浅出 Vue3</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue2 &amp;&amp; React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>计算机基础</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/browser/security_code.html" class="sidebar-link">前端安全性</a></li><li><a href="/browser/http.html" aria-current="page" class="active sidebar-link">关于Http</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/browser/page_load.html" class="sidebar-link">页面加载过程</a></li><li><a href="/browser/design_model.html" class="sidebar-link">设计模式</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>算法基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>手写代码合集</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>经验之谈</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/Node.html" class="sidebar-link">Node</a></li><li><a href="/TypeScript.html" class="sidebar-link">TypeScript</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="关于http"><a href="#关于http" class="header-anchor">#</a> 关于Http</h1> <h3 id="什么是http-超文本传输协议-它是一个应用层协议。"><a href="#什么是http-超文本传输协议-它是一个应用层协议。" class="header-anchor">#</a> 什么是http？<strong>超文本传输协议</strong>，它是一个<strong>应用层</strong>协议。</h3> <p>HTTP（HyperText Transfer Protocol）协议是基于TCP的应用层协议，它不关心数据传输的细节，主要是用来规定客户端和服务端的数据传输格式，最初是用来向客户端传输HTML页面的内容。默认端口是80。</p> <h3 id="http简史"><a href="#http简史" class="header-anchor">#</a> HTTP简史</h3> <h4 id="http-0-9版本-1991年"><a href="#http-0-9版本-1991年" class="header-anchor">#</a> HTTP 0.9版本  1991年</h4> <p>这个版本就是最初用来向客户端传输HTML页面的，所以只有一个GET命令，然后服务器返回客户端一个HTML页面，不能是其他格式。
利用这个版本完全可以构建一个简单的静态网站了。</p> <h4 id="http-1-0版本-1996年"><a href="#http-1-0版本-1996年" class="header-anchor">#</a> HTTP 1.0版本  1996年</h4> <p>1.0版本是改变计较大的，尊订了现在HTTP协议的基础，这个版本的协议不仅可以传输HTML的文本页面，还可以传输其他二进制文件，例如：图片、视频。而且还增加了现在常用的POST和HEAD命令。请求消息和响应消息也不是单一的了，规定了一些元数据字段。例如：字符集、编码。状态响应码等。</p> <h4 id="http-1-1版本-1997年"><a href="#http-1-1版本-1997年" class="header-anchor">#</a> HTTP 1.1版本 1997年</h4> <p>在1.0版本发布之后半年的时间又发布了一个版本，这个版本在1.0版本的基础上更加完善了。这个版本增加了持久连接，就是之前版本的协议一次请求就是一次TCP链接，请求完成后这个链接就关闭掉了。众所周知TCP协议是可靠的，建立连接需要3次握手，断开链接需要4次挥手，并且TCP有流量控制和阻塞控制，有慢开始机制，刚建立链接时传输比较慢，这是比较耗费资源的。一个丰富的页面会有许多图片、表单和超链接。这样的话就会有多次的HTTP请求，所以在这个版本上默认不关闭TCP连接也不声明Connection：keep-alive字段，如果确实要关闭可以指定Connection：close字段。还引入了管道机制，就是说在一个TCP链接里可以同时发送多个HTTP请求，而不必等待上一个请求响应成功再发送。还增加了PUT、PATCH、HEAD、OPTION、DELETE等命令。丰富了客户端和服务端交互动作。还增加了Host字段。</p> <h4 id="http-2-0版本-2015年"><a href="#http-2-0版本-2015年" class="header-anchor">#</a> HTTP 2.0版本  2015年</h4> <p>这个版本也是随着互联网的发展，有了新的需求定制了新的功能还有对上一个版本的完善。1.1版本有了管道机制，但是在服务端还是要对请求进行排队处理。这个版本可以多工的处理。还有了头信心压缩和服务器的主动推送。</p> <h3 id="http特点"><a href="#http特点" class="header-anchor">#</a> http特点：</h3> <ul><li>无状态的协议，无状态就是客户端的每次请求都没有关系，它们是独立的。</li> <li>只能是客户端发起请求，服务器响应。服务器不能主动向客户端传递消息。</li> <li>底层是基于TCP实现的。</li></ul> <h3 id="http报文分为请求报文和响应报文"><a href="#http报文分为请求报文和响应报文" class="header-anchor">#</a> http报文分为请求报文和响应报文</h3> <ul><li><p>请求报文：它会向Web服务器请求一个动作。</p> <ul><li><p>请求报文由请求行（request line）、请求头部（header）、空行和请求数据4个部分组成</p></li> <li><p>请求头</p> <p>Accept:</p> <p>Accept-Encoding: gzip, deflate, br</p> <p>Accept-Language: zh-CN,zh;q=0.9</p> <p>Cache-Control: max-age=0</p> <p>Connection: keep-alive</p> <p>Host: localhost:8080</p> <p>Referer: http://localhost:8080/browser/http.html</p> <p>Sec-Fetch-Dest: document</p> <p>Sec-Fetch-Mode: navigate</p> <p>Sec-Fetch-Site: same-origin</p></li></ul></li> <li><p>响应报文：它会将请求的结果返回给客户端。</p> <ul><li><p>响应报文由三个部分组成，分别是：状态行、消息报头、响应正文。</p></li> <li><p>响应头</p> <p>Accept-Ranges: bytes</p> <p>access-control-allow-origin: *</p> <p>Content-Length: 287</p> <p>Content-Type: text/html; charset=UTF-8</p> <p>Date: Thu, 19 Nov 2020 15:57:34 GMT</p> <p>ETag: W/&quot;11f-Zn+0AjH/vxli4WLj1EMYz+sNabc&quot;</p> <p>Vary: Accept-Encoding</p> <p>X-Powered-By: Express</p></li></ul></li></ul> <h3 id="前端要重点知道的知识"><a href="#前端要重点知道的知识" class="header-anchor">#</a> 前端要重点知道的知识</h3> <h4 id="_1-url-统一资源标识符"><a href="#_1-url-统一资源标识符" class="header-anchor">#</a> 1. URL（统一资源标识符）</h4> <p>一种特殊类型的URI，包含协议、域名、端口，可能包含虚拟目录、文件名、锚、参数。其中协议，域名，端口一部分不一样，就是跨域。</p> <h4 id="_2-request-method-请求方式"><a href="#_2-request-method-请求方式" class="header-anchor">#</a> 2. Request Method（请求方式）：</h4> <p>GET，POST，HEAD，PUT，DELETE，CONNECT，OPTIONS，TRACE。常用就是GET,POST，注意它们的区别。</p> <h4 id="_3-状态码"><a href="#_3-状态码" class="header-anchor">#</a> 3. 状态码：</h4> <ul><li>1xx：指示信息--表示请求已接收，继续处理。</li> <li>2xx：成功--表示请求已被成功接收、理解、接受。</li> <li>3xx：重定向--要完成请求必须进行更进一步的操作。</li> <li>4xx：客户端错误--请求有语法错误或请求无法实现。</li> <li>5xx：服务器端错误--服务器未能实现合法的请求。</li></ul> <p><strong>常见状态码</strong></p> <ul><li>200 OK：客户端请求成功。</li> <li>400 Bad Request：客户端请求有语法错误，不能被服务器所理解。</li> <li>401 Unauthorized：请求未经授权，这个状态代码必须和WWW-Authenticate报头域一起使用。</li> <li>403 Forbidden：服务器收到请求，但是拒绝提供服务。</li> <li>404 Not Found：请求资源不存在，举个例子：输入了错误的URL。</li> <li>500 Internal Server Error：服务器发生不可预期的错误。</li> <li>503 Server Unavailable：服务器当前不能处理客户端的请求，一段时间后可能恢复正常，举个例子：HTTP/1.1 200 OK（CRLF）。</li></ul> <h4 id="_4-cookie与session区别"><a href="#_4-cookie与session区别" class="header-anchor">#</a> 4. cookie与session区别：</h4> <ul><li><p>cookie将状态保存在客户端，session将状态保存在服务端。</p></li> <li><p>session相对于cookie要安全，但cookie不需要占用服务器的资源。</p></li> <li><p>单个cookie保存的数据不能超过4K，很多浏览器都限制一个站点最多保存20个cookie。</p></li></ul> <h3 id="https"><a href="#https" class="header-anchor">#</a> HTTPS</h3> <p>HTTPS是http协议的<strong>安全版本</strong>，http协议的数据传输是<strong>明文</strong>的，是不安全的，HTTPS使用了<strong>SSL/TLS</strong>协议进行了<strong>加密处理</strong>。</p> <p><strong>http与https的区别</strong></p> <ul><li><p>HTTP 无法加密，而HTTPS 对传输的数据进行加密，更加安全。</p></li> <li><p>HTTP 无需证书，而HTTPS 需要CA机构wosign的颁发的SSL证书。</p></li> <li><p>HTTP 标准端口是80 ，而 HTTPS 的标准端口是443。</p></li> <li><p>在OSI 网络模型中，HTTP工作于应用层，而HTTPS 的安全传输机制工作在传输层。</p></li></ul> <p><a href="https://www.jianshu.com/p/a1ebc61ce141" target="_blank" rel="noopener noreferrer">TCP三次握手及四次挥手<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://blog.csdn.net/sean_cd/article/details/6966130" target="_blank" rel="noopener noreferrer">https工作原理<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="content-type"><a href="#content-type" class="header-anchor">#</a> Content-Type</h3> <p>前端数据传递至后台时，需要对其进行编码，其中，编码格式可分为四种：</p> <ol><li>application/x-www-form-urlencoded，</li> <li>multipart/form-data，</li> <li>application/json，</li> <li>text/plain。</li></ol> <p>前后台完成数据交互的方式只有两种:</p> <ol><li>form表单提交,
<ul><li>form表单通过enctype属性设置编码类型,默认值是: application/x-www-form-urlencoded;</li></ul></li> <li>ajax提交。
<ul><li>ajax可通过contentType属性设置编码类型,默认值也是: application/x-www-form-urlencoded;</li></ul></li></ol> <h4 id="application-x-www-form-urlencoded"><a href="#application-x-www-form-urlencoded" class="header-anchor">#</a> application/x-www-form-urlencoded</h4> <blockquote><p>后台如何接收?使用request.getParameter('work');来获取参数名和参数值。</p></blockquote> <p>这种编码格式，是我们最常见的一种方式，将数据封装成一个字符串，参数名和参数值使用&quot;＝&quot;拼接，参数之间使用&quot;&amp;&quot;拼接，最终传递
到后台的数据格式如: key1=value1&amp;key2=value2&amp;...;</p> <p>另外，key和value都会分别使用encodeURI()对其进行编码，也就是你所要传递的数据，实际上已经进行了一次编码，形如：name=Marydon&amp;work=%E7%A8%8B%E5%BA%8F%E5%91%98，服务器接收到后干的第一件事就是使用URLDdecoder.decode()对name和value进行一次解码。不管是form表单请求还是ajax请求，都是这样进行数据组装的。</p> <h4 id="get请求和post请求的区别"><a href="#get请求和post请求的区别" class="header-anchor">#</a> get请求和post请求的区别</h4> <ul><li>get请求：没有请求体；会直接将form数据拼接到url中，用？隔开，数据对外可见；</li> <li>post请求：将数据放到请求体中；无法直观看到要传输的数据，安全性相对高一点。</li></ul> <p>这是为我们大众所熟知的两个区别，那么问题来了，为何get请求提交的数据携带中文时，后台接收到的中文数据会乱码，而post请求就不会乱码呢？</p> <p>在来看一下这两请求</p> <p><strong>get请求</strong></p> <p><img src="/assets/img/http-get.2d5d5214.png" alt="get请求" title="get请求"></p> <p><strong>get请求</strong></p> <p><img src="/assets/img/http-post.fe7a36dd.png" alt="get请求" title="post请求"></p> <p>后台将请求字符集打印出来</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 该请求的字符集是</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getCharacterEncoding</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>　　
</code></pre></div><p>通过前后端测试，这次我们可以看出来get请求与post请求的另一个区别：</p> <ul><li>当form表单数据编码类型设置为application/x-www-form-urlencoded时（也就是默认值），浏览器向后台发送请求时，分为两种情况：</li> <li>当请求方式为get时，请求头部信息没有Content-Type属性，也没有指定数据的字符集；</li> <li>当请求方式为post时，请求头部信息有Content-Type属性，并指定数据的字符集，即：application/x-www-form-urlencoded; charset=UTF-8；</li></ul> <p>那么get请求时，所采用的字符集到底是什么？通过后台测试得出结果：ISO-8859-1</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// get请求默认字符集</span>
contentType <span class="token operator">:</span> <span class="token string">'application/x-www-form-urlencoded; charset=UTF-8'</span><span class="token comment">// 显式声明</span>
</code></pre></div><p>那么既然如此，在ajax请求中，我们是不是可以显式声明contentType属性，解决get请求乱码问题呢？</p> <div class="language-java extra-class"><pre class="language-java"><code>type <span class="token operator">:</span> <span class="token string">'get'</span><span class="token punctuation">,</span><span class="token comment">// 请求方式</span>
contentType <span class="token operator">:</span> <span class="token string">'application/x-www-form-urlencoded; charset=UTF-8'</span><span class="token punctuation">,</span><span class="token comment">// 显式声明</span>
</code></pre></div><p>网页已经生效,　　结果却令人失望：　　还是乱码，还得重新编码。
　　Content-Type属性，告诉服务器提交的数据的字符集是utf-8，并让服务器以utf-8格式解析数据，由此可见：
　　问题不在于服务器，而在于浏览器：当浏览器检测到编码格式为application/x-www-form-urlencoded并且为get请求时，浏览器会先用ISO-8859-1对form数据进行编码，然后再用encodeURI()对其进行编码。
　　所以，get请求导致后台接收到的中文出现乱码的根本原因是：页面字符集是utf-8，浏览器却按iso-8859-1进行重新编码，后台接收后以utf-8进行解码当然会出现乱码。</p> <p><strong>小结</strong></p> <ul><li>当表单数据的编码格式为：application/x-www-form-urlencoded时：</li> <li>get请求，浏览器会将数据按照iso-8859-1进行重新编码，导致后台接收到中文时必然乱码；</li> <li>post请求，浏览器会按照utf-8对要提交的数据进行编码，由于后台本身就是使用utf-8对其进行解析，所以才不会出现乱码的情况。</li> <li>至于get请求解决乱码问题主要有两种方式，具体见另一篇文章。</li></ul> <h4 id="multipart-form-data"><a href="#multipart-form-data" class="header-anchor">#</a> multipart/form-data</h4> <p>主要用于传输文件，将文件转换成二进制数据进行传输，不涉及转码问题。</p> <blockquote><p>后台如何接收?使用request.getInputStream();取值。</p></blockquote> <p>IE浏览器和chrome浏览器下，传输的form数据是不一样的；</p> <p>共同点是：Content-Type的值为multipart/form-data; boundary=--...，貌似没有其它的固定格式，不再考虑，后台只要能接收到就行。</p> <p>结合代码进行实现：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onchange</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>upload(<span class="token punctuation">'</span>getParams<span class="token punctuation">'</span>)<span class="token punctuation">&quot;</span></span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token style language-css"><span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>上传<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>javascript:$(<span class="token punctuation">&quot;</span>#file<span class="token punctuation">&quot;</span>).click()<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>　　
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">upload</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// js 获取文件对象</span>
    <span class="token keyword">var</span> fileObj <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;file&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">===</span> fileObj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'图片上传失败，请重试~'</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 创建form表单</span>
    <span class="token keyword">var</span> formFile <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 加入文件对象</span>
    formFile<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'file'</span><span class="token punctuation">,</span> fileObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 创建XMLHttpRequest对象</span>
    <span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// post方式，url为服务器请求地址，true 该参数规定请求是否异步处理。</span>
    xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'post'</span><span class="token punctuation">,</span> url<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 请求完成</span>
    xhr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 将返回数据转换成JSON对象</span>
        <span class="token keyword">var</span> resData <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
        document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'file'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// 请求失败</span>
    xhr<span class="token punctuation">.</span>onerror <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token comment">// 上传进度调用方法（可实现上传进度条）</span>
    xhr<span class="token punctuation">.</span>upload<span class="token punctuation">.</span>onprogress <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token comment">// 开始上传,发送form数据(以二进制数据传递给后台)</span>
    xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>formFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>后台接收</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token function">voiddoGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token class-name">InputStream</span> is <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>i <span class="token operator">=</span> is<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="application-json"><a href="#application-json" class="header-anchor">#</a> application/json</h4> <blockquote><p>后台如何接收?使用request.getReader()取值，也可以使用request.getInputStream()获取。</p></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/browser/security_code.html" class="prev">
        前端安全性
      </a></span> <span class="next"><a href="/browser/page_load.html">
        页面加载过程
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.b7a1be70.js" defer></script><script src="/assets/js/2.7944c152.js" defer></script><script src="/assets/js/8.ed44696a.js" defer></script>
  </body>
</html>
