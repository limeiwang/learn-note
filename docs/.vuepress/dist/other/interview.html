<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>面试问题 | Limw</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="Limw,源码解析,前端,Vue,Vue3,Es6,Javascript">
    
    <link rel="preload" href="/assets/css/0.styles.fc482a2c.css" as="style"><link rel="preload" href="/assets/js/app.111d0210.js" as="script"><link rel="preload" href="/assets/js/2.23335ef3.js" as="script"><link rel="preload" href="/assets/js/11.968f70bd.js" as="script"><link rel="prefetch" href="/assets/js/10.b3f6f675.js"><link rel="prefetch" href="/assets/js/12.77ac9c78.js"><link rel="prefetch" href="/assets/js/13.636f8736.js"><link rel="prefetch" href="/assets/js/14.f0b177c2.js"><link rel="prefetch" href="/assets/js/15.16a5fc91.js"><link rel="prefetch" href="/assets/js/16.9a3e619e.js"><link rel="prefetch" href="/assets/js/17.0cb75e3d.js"><link rel="prefetch" href="/assets/js/18.12a0978c.js"><link rel="prefetch" href="/assets/js/19.1c548617.js"><link rel="prefetch" href="/assets/js/20.9af9b7e6.js"><link rel="prefetch" href="/assets/js/21.3b64d529.js"><link rel="prefetch" href="/assets/js/22.95d828ba.js"><link rel="prefetch" href="/assets/js/23.74e2c857.js"><link rel="prefetch" href="/assets/js/24.c23405f0.js"><link rel="prefetch" href="/assets/js/25.130eff5b.js"><link rel="prefetch" href="/assets/js/26.829dfc9f.js"><link rel="prefetch" href="/assets/js/27.82a13302.js"><link rel="prefetch" href="/assets/js/28.fca76713.js"><link rel="prefetch" href="/assets/js/29.76775c9a.js"><link rel="prefetch" href="/assets/js/3.445d4bcc.js"><link rel="prefetch" href="/assets/js/30.76d33964.js"><link rel="prefetch" href="/assets/js/31.0cabc746.js"><link rel="prefetch" href="/assets/js/32.7c166d83.js"><link rel="prefetch" href="/assets/js/33.ce6def8e.js"><link rel="prefetch" href="/assets/js/34.bbd8c315.js"><link rel="prefetch" href="/assets/js/35.98263c06.js"><link rel="prefetch" href="/assets/js/36.f6fe102f.js"><link rel="prefetch" href="/assets/js/37.c9fdda1f.js"><link rel="prefetch" href="/assets/js/38.4db2de89.js"><link rel="prefetch" href="/assets/js/4.094ff41c.js"><link rel="prefetch" href="/assets/js/5.4365847c.js"><link rel="prefetch" href="/assets/js/6.c03de7d8.js"><link rel="prefetch" href="/assets/js/7.4cf30f7d.js"><link rel="prefetch" href="/assets/js/8.bef48ad7.js"><link rel="prefetch" href="/assets/js/9.5f2bbdd4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.fc482a2c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Limw</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="https://lmw0221.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/lmw0221" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="https://lmw0221.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/lmw0221" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>深入浅出 Vue3</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue2 &amp;&amp; React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算机基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>算法基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>手写代码合集</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>经验之谈</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/other/git.html" class="sidebar-link">git命令 </a></li><li><a href="/other/interview.html" aria-current="page" class="active sidebar-link">面试问题</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/other/node.html" class="sidebar-link">node经验包</a></li></ul></section></li><li><a href="/Node.html" class="sidebar-link">Node</a></li><li><a href="/TypeScript.html" class="sidebar-link">TypeScript</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="面试问题"><a href="#面试问题" class="header-anchor">#</a> 面试问题</h1> <blockquote><p>总结出去面试所被问到的问题</p></blockquote> <h3 id="vue数据双向绑定原理"><a href="#vue数据双向绑定原理" class="header-anchor">#</a> vue数据双向绑定原理</h3> <blockquote><p>Vue的双向绑定是利用订阅-发布者模式+数据劫持实现的</p></blockquote> <p>使用<code>Object.defineProperty</code>和ES6的<code>Proxy</code>，这就是进行数据劫持或数据代理。</p> <p>利用<code>Object.defineProperty</code>的<code>getter</code>方法：由<code>Deps</code>收集<code>Watcher</code>对象，在<code>setter</code>中<code>notify</code>。</p> <p>在<code>getter</code>中实现绑定的而不是<code>setter</code>，这样可以只劫持被使用的数据。</p> <p>双向绑定实现原理图：</p> <p><img src="/assets/img/render.5de7af21.png" alt="render"></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>zh<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ie=edge<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
	
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>num<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">v-bind</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>num<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addNum<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
				加一次
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">

		<span class="token keyword">let</span> protoToString <span class="token operator">=</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString<span class="token punctuation">;</span>

		<span class="token keyword">function</span> <span class="token function">isArray</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">protoToString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'[object Array]'</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">class</span> <span class="token class-name">Watcher</span> <span class="token punctuation">{</span>
			<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">node<span class="token punctuation">,</span> cb<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>node <span class="token operator">=</span> node<span class="token punctuation">;</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>cb <span class="token operator">=</span> cb<span class="token punctuation">;</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>key <span class="token operator">=</span> key<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token function">update</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">cb</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		
		<span class="token keyword">class</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span>
			<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>el<span class="token punctuation">,</span> data<span class="token punctuation">,</span> methods<span class="token punctuation">,</span> render<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>$ele <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token comment">// x</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>$dep <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>$data <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_obs</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>$methods <span class="token operator">=</span> methods<span class="token punctuation">;</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_compileHtml</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$ele<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// 数据劫持</span>
			<span class="token function">_obs</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">let</span> _that <span class="token operator">=</span> <span class="token keyword">this</span>
				<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token punctuation">{</span>
					<span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> target<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>
					<span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">let</span> val <span class="token operator">=</span> Reflect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
						_that<span class="token punctuation">.</span>$dep<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">return</span> val<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

            <span class="token comment">// 订阅</span>
			<span class="token function">_pushWatcher</span><span class="token punctuation">(</span><span class="token parameter">watcher</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>$dep<span class="token punctuation">[</span>watcher<span class="token punctuation">.</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>$dep<span class="token punctuation">[</span>watcher<span class="token punctuation">.</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>$dep<span class="token punctuation">[</span>watcher<span class="token punctuation">.</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>watcher<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// 解析html</span>
			<span class="token function">_compileHtml</span><span class="token punctuation">(</span><span class="token parameter">ele</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">const</span> nodes <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>ele<span class="token punctuation">.</span>children<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$data<span class="token punctuation">;</span>
				<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> node <span class="token keyword">of</span> nodes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">let</span> attrs <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>attributes<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token comment">// 判断是否input???</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'v-model'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">const</span> key <span class="token operator">=</span> node<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'v-model'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">let</span> <span class="token function-variable function">cb</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
							node<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$data<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
						<span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_pushWatcher</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Watcher</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> cb<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						node<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
							data<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> node<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
						<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'v-bind'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">const</span> key <span class="token operator">=</span> node<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'v-bind'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">let</span> <span class="token function-variable function">cb</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
							node<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$data<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
						<span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_pushWatcher</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Watcher</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> cb<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'@click'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">const</span> key <span class="token operator">=</span> node<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'@click'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						node<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
							<span class="token keyword">this</span><span class="token punctuation">.</span>$methods<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					<span class="token comment">// 子元素递归</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>children <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_compileHtml</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

        <span class="token comment">// 使用</span>
		<span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			el<span class="token operator">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
			data<span class="token operator">:</span> <span class="token punctuation">{</span>
				num<span class="token operator">:</span> <span class="token number">0</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			methods<span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token function">addNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>$data<span class="token punctuation">.</span>num<span class="token operator">++</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
		
	</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>注意点：</strong></p> <ul><li>Vue在初始化组件数据(data、props、computed、methods、events、watch)时，发生在create时期（beforeCreate与created之间）</li> <li>render(渲染)触发的是Data的getter操作（保证视图中用到的数据改变才触发后续的重新渲染）</li> <li>Vue2.0的数据劫持<code>Object.defineProperty</code>方法是无法监听<code>Array</code>变化的
<ul><li>尤大使用了hack手法，重写了['push', 'pop', 'shift', 'unshift', 'splice', 'sort', 'reverse']，</li> <li>同时使用<code>const arrayMethods = Object.create(arrayProto)</code>确保不污染原生数组方法</li></ul></li></ul> <h3 id="object-defineproperty-vs-proxy"><a href="#object-defineproperty-vs-proxy" class="header-anchor">#</a> Object.defineProperty vs Proxy</h3> <h4 id="vue2-0"><a href="#vue2-0" class="header-anchor">#</a> Vue2.0</h4> <ol><li>基于Object.defineProperty，不具备监听数组的能力，需要重新定义数组的原型来达到响应式。</li> <li>Object.defineProperty 无法检测到对象属性的添加和删除 。</li> <li>由于Vue会在初始化实例时对属性执行getter/setter转化，所有属性必须在data对象上存在才能让Vue将它转换为响应式。</li> <li>深度监听需要一次性递归，对性能影响比较大。</li></ol> <h4 id="vue3-0"><a href="#vue3-0" class="header-anchor">#</a> Vue3.0</h4> <ol><li>基于Proxy和Reflect，可以原生监听数组，可以监听对象属性的添加和删除。</li> <li>不需要一次性遍历data的属性，可以显著提高性能。</li> <li>因为Proxy是ES6新增的属性，有些浏览器还不支持,只能兼容到IE11 。</li></ol> <h3 id="vue的生命周期"><a href="#vue的生命周期" class="header-anchor">#</a> vue的生命周期</h3> <blockquote><p>浏览器有8个钩子，但是node中做服务端渲染的时候只有beforeCreate和created</p></blockquote> <h4 id="初始化阶段"><a href="#初始化阶段" class="header-anchor">#</a> 初始化阶段</h4> <ol><li><code>beforeCreate</code>是new Vue()之后触发的第一个钩子，在当前阶段data、methods、computed以及watch上的数据和方法<code>都不能</code>被访问。</li> <li><code>created</code>在实例创建完成后发生，当前阶段已经完成了<code>数据观测</code>，也就是可以使用数据，更改数据，在这里更改数据不会触发<code>updated函数</code>。可以做一些初始数据的获取，在当前阶段<code>无法与Dom进行交互</code>，如果非要想，可以通过<code>vm.$nextTick</code>来访问Dom。</li></ol> <h4 id="挂载阶段"><a href="#挂载阶段" class="header-anchor">#</a> 挂载阶段</h4> <ol start="3"><li><code>beforeMount</code>发生在<code>挂载之前</code>，在这之前template模板已导入渲染函数编译。而当前阶段<code>虚拟Dom</code>已经创建完成，即将开始渲染。在此时也可以对数据进行更改，<code>不会触</code>发updated。</li> <li><code>mounted</code>在<code>挂载完成后</code>发生，在当前阶段，真实的Dom<code>挂载完毕</code>，数据完成双向绑定，可以访问到<code>Dom节点</code>，使用$refs属性对Dom进行操作。</li></ol> <h4 id="更新阶段"><a href="#更新阶段" class="header-anchor">#</a> 更新阶段</h4> <ol start="5"><li><code>beforeUpdate</code>发生在<code>更新之前</code>，也就是响应式数据发生更新，虚拟dom<code>重新渲染之前</code>被触发，你可以在当前阶段进行更改数据，不会造成重渲染。</li> <li><code>updated</code>发生在<code>更新完成之后</code>，当前阶段组件Dom已完成更新。要注意的是避免在此期间更改数据，因为这可能会导致<code>无限循环</code>的更新。</li></ol> <h4 id="销毁阶段"><a href="#销毁阶段" class="header-anchor">#</a> 销毁阶段</h4> <ol start="7"><li><code>beforeDestroy</code>发生在<code>实例销毁之前</code>，在当前阶段实例完全可以被使用，我们可以在这时进行善后收尾工作，比如清除计时器，销毁父组件对子组件的重复监听。beforeDestroy(){Bus.$off(&quot;saveTheme&quot;)}</li> <li><code>destroyed</code>发生在<code>实例销毁之后</code>，这个时候只剩下了<code>dom空壳</code>。组件已被拆解，数据绑定被卸除，监听被移出，子实例也统统被销毁。</li></ol> <h3 id="vue的单向数据流"><a href="#vue的单向数据流" class="header-anchor">#</a> vue的单向数据流</h3> <p>所有的 prop 都使得其父子 prop 之间形成了一个<code>单向下行绑定</code>：父级 prop 的更新会向下流动到子组件中，但是反过来则不行。这样会防止从子组件<code>意外改变</code>父级组件的状态，从而导致你的应用的<code>数据流向</code>变的混乱。</p> <h3 id="v-if-vs-v-show"><a href="#v-if-vs-v-show" class="header-anchor">#</a> v-if vs v-show</h3> <ol><li>v-if是<code>真正</code>的条件渲染，因为它会确保在切换的过程中条件块内的事件监听器和子组件适当地被撤销和重建。</li> <li>v-if也是<code>惰性</code>的：如果在渲染的时条件为假，则什么也不做--直到条件第一次变为真时，才会开始渲染条件块。</li> <li>相比之下，v-show就简单得多--不管初始条件是什么，元素总是会被渲染，并且只是简单地基于CSS进行切换。</li></ol> <blockquote><p>v-if有更高的切换开销，而v-show有更高的初始化渲染开销。因为，如果需要非常频繁地切换，则使用v-show较好；如果在运行时条件很少改变，则v-if较好。</p></blockquote> <h3 id="通过script标签引入vue和使用vue-cli有什么区别"><a href="#通过script标签引入vue和使用vue-cli有什么区别" class="header-anchor">#</a> 通过script标签引入vue和使用vue-cli有什么区别？</h3> <p>script标签引入vue并不算得上是一个工程化的代码，如果我们需要实现工程那么它就需要具备能够使用单位件组件也就是扩展名为.vue文件，除了这些我们还要能使用sass能使用路由，这些需求往往都需要配合各种各样loader，那loader就需要webpack进行打包转意，如果说我们需要配置一个完整的工程的话难度还是比较大的需要看官方文档从头陪到尾。</p> <h3 id="link标签-vs-import"><a href="#link标签-vs-import" class="header-anchor">#</a> link标签 vs @import</h3> <ol><li>link属于html标签，而@import是css提供的</li> <li>页面被加载时，link会同时被加载，而@import引用的css会等到页面加载结束后加载。</li> <li>link是html标签，因此没有兼容性，而@import只有IE5以上才能识别。</li> <li>link方式样式的权重高于@import的。</li> <li>link可以使用 js 动态引入，@import不行</li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/other/git.html" class="prev">
        git命令 
      </a></span> <span class="next"><a href="/other/node.html">
        node经验包
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.111d0210.js" defer></script><script src="/assets/js/2.23335ef3.js" defer></script><script src="/assets/js/11.968f70bd.js" defer></script>
  </body>
</html>
